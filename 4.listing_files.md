# Chapter 4: Liệt kê file với lệnh `ls`

Các option của lệnh `ls`:

`-a`, `--all`: Liệt kê tất cả các file, thư mục kể cả `.` và `..`

`-A`, `--almost-all`: Liệt kê tất cả các file, thư mục ngoại trừ `.` và `..`

`-c`: Sắp xếp theo thời gian sửa đổi file

`-d`, `--directory`: Liệt kê các thư mục

`-h`, `--human-readable`: Hiển thị kích thước file theo dạng cho người đọc (ví dụ như K, M, G)

`-H`: Hiển thị kích thước file theo dạng cho người đọc. Nhưng sử dụng cách tính 1000 thay vì 1024

`-l`: Hiển thị nội dung với định dạng long-listing (danh sách dài). Hiển thị đầy đủ thông tin về file, thư mục

`-o`: Hiển thị nội dung với định dạng long-listing nhưng không có thông tin group

`-r`, `--reverse`: Hiển thị nội dung theo chiều ngược

`-s`, `--size`: In ra kích thước của từng file trong block

`-S`: Sắp xếp theo kích thước file

`--sort=TỪ`: Sắp xếp nội dung bởi 1 từ (ví dụ như size, status, version)

`-t`: Sắp xếp theo thời gian chỉnh sửa file/thư mục

`-u`: Sắp xếp theo thời gian truy cập gần nhất

`-v`: Sắp xếp theo phiên bản

`-1`: In danh sách mỗi dòng 1 file

## 4.1. Liệt kê file ở định dạng danh sách dài (long-listing)

Tùy chọn `-l` của lệnh ls hiển thị nội dung của thư mục cụ thể ở định dạng danh sách dài. Nếu không có đối số của thư mục chỉ định chỉ nó sẽ hiển thị nội dung của thư mục hiện tại.

    [root@localhost dungdb]# ls -l
    total 8
    drwxr-xr-x. 3 root root 4096 Sep 10 11:26 hoctap
    -rw-r--r--. 1 root root    0 Sep 10 11:58 note.txt
    drwxr-xr-x. 2 root root 4096 Sep 10 11:58 vuichoi
    [root@localhost dungdb]#

| Cột | Ví dụ  | Mô tả |
|-----|:-----:|-----|
| 1.1   | d    | Loại file (xem bảng bên dưới)    |
| 1.2  | rwxr-xr-x    | chuỗi quyền    |
| 2 | 3    | Số lượng hard link    |
| 3   | root     | Tên người sở hữu    |
| 4   | root    | Tên group sở hữu    |
| 5   |   4096  | Kích thước file tính bằng byte    |
| 6   | Sep 10 11:58    | Thời gian chỉnh sửa    |
| 7   | note.txt    | Tên file    |

Ở phần 1.1 loại của tệp: có thể là một trong bất kỳ ký tự nào sau đây:

| Cột | Ví dụ  |
|-----|:-----|
| -  | Tệp thông thường    |
| b   | Chặn các tệp đặc biệt    |
| c   | Tệp ký tự đặc biệt    |
| C   | Tệp hiệu xuất cao    |
| d   | Thư mục    |
| D   | Door (tệp đặc biệt chỉ có trong Solaris 2.5+)   |
| I   | Liên kết tượng trưng- Symbolic link    |
| M   | Off-line (đã được chuyển đi)    |
| n   | Tệp đặc biệt của mạng(HP-UX)    |
| p   | FIFO (named pipe)    |
| P   | port (tệp đặc biệt chỉ có trong Solaris 10+)    |
| s   | Socket    |
| ?   | Một số loại tệp khác    |

## 4.2. Liệt kê 10 file được chỉnh sửa gần đây nhất

Câu lệnh dưới đây sẽ liệt kê 10 tệp được sửa đổi gần nhất trong thư mục hiện tại, sử dụng long listing format (định dạng danh sách dài) `-l` và sắp xếp theo thời gian chỉnh sửa `-t`.

    ls -lt | head

## 4.3. Liệt kê tất cả file bao gồm cả các file chấm

Các file chấm (dotfiles) là file có tên bắt đầu với một dấu chấm `.`. Chúng thường bị ẩn đi khi dùng lệnh `ls` trừ khi được yêu cầu hiển thị.

Tùy chọn `-a` hoặc `--all` sẽ liệt kê tất cả các tệp bao gồm các tệp dotfiles.

Tùy chọn -A hoặc –almost-all sẽ liệt kê tất cả các loại tệp, bao gồm các tệp Dotfiles, nhưng không liệt kê (.) và (..).

    [root@localhost ~]# ls
    anaconda-ks.cfg
    [root@localhost ~]# ls -a
    .   anaconda-ks.cfg  .bash_logout   .bashrc  .pki  .tcshrc
    ..  .bash_history    .bash_profile  .cshrc   .rnd
    [root@localhost ~]# ls -A
    anaconda-ks.cfg  .bash_logout   .bashrc  .pki  .tcshrc
    .bash_history    .bash_profile  .cshrc   .rnd
    [root@localhost ~]#

## 4.4. Liệt kê các file mà không cần sử dụng lệnh `ls`

Sử dụng File name expansion và brace expansion của bash shell để lấy tên các tệp.

    # hiển thị các tệp và thư mục có trong thư mục hiện tại
    printf "%s\n" *
    # chỉ hiển thị các thư mục trong thư mục hiện tại
    printf "%s\n" */
    # chỉ hiển thị (một số) tệp hình ảnh
    printf "%s\n" *.{gif,jpg,png}

## 4.5. Liệt kê các file

Lệnh `ls` liệt kê tất cả các file ở thư mục hiện tại, trừ các dotfile. Các file được liệt kê theo thứ tự alphabet và được xếp theo nhiều cột nếu không vừa 1 cột.

## 4.6. Liệt kê các file ra cây thư mục

Cài đặt lệnh `tree` với Centos

    sudo yum install tree

Cài đặt lệnh `tree` với Ubuntu

    apt install tree

Sử dụng

    [root@localhost dungdb]# tree
    .
    ├── hoctap
    │   └── bash_shell
    ├── note.txt
    └── vuichoi

    3 directories, 1 file
    [root@localhost dungdb]#

## 4.7. Liệt kê các file theo kích thước

Tùy chọn `-`S của lệnh `ls` sắp xếp các tẹp theo thứ tự giảm dần về kích thước:

    [root@localhost dungdb]# ls -lS
    total 12
    drwxr-xr-x. 3 root root 4096 Sep 10 16:44 hoctap
    drwxr-xr-x. 2 root root 4096 Sep 10 11:58 vuichoi
    -rw-r--r--. 1 root root    3 Sep 10 16:44 doc.txt
    -rw-r--r--. 1 root root    0 Sep 10 11:58 note.txt
    [root@localhost dungdb]#

Muốn sắp xếp theo thứ tự tăng dần sử dụng `ls -lSr`

    [root@localhost dungdb]# ls -lSr
    total 12
    -rw-r--r--. 1 root root    0 Sep 10 11:58 note.txt
    -rw-r--r--. 1 root root    3 Sep 10 16:44 doc.txt
    drwxr-xr-x. 2 root root 4096 Sep 10 11:58 vuichoi
    drwxr-xr-x. 3 root root 4096 Sep 10 16:44 hoctap
    [root@localhost dungdb]#


