# Chapter 20: Here documents

Here documents cho phép bạn sử dụng chuyển hướng đầu vào / đầu ra bên trong các tập lệnh Bash trên Linux. Đây là một cách tuyệt vời để tự động hóa các lệnh bạn cần chạy trên máy tính từ xa.

## Ví dụ đơn giản

    cat << EOF
    The current working directory is: $PWD
    You are logged in as: $(whoami)
    EOF

Output

    The current working directory is: /root
    You are logged in as: root

Nếu sử dụng thêm dấu phân cách

    cat <<- "EOF"
    The current working directory is: $PWD
    You are logged in as: $(whoami)
    EOF

output

    The current working directory is: $PWD
    You are logged in as: $(whoami)

Thay vì hiển thị đầu ra trên màn hình, bạn có thể chuyển hướng nó đến một tệp bằng cách sử dụng các toán tử `>`, `>>`.

    cat << EOF > file.txt
    The current working directory is: $PWD
    You are logged in as: $(whoami)
    EOF

Nếu tệp `.txt` không tồn tại, tệp sẽ được tạo. Khi sử dụng `>` tệp sẽ bị ghi đè, trong khi dấu `>>` sẽ nối đầu ra vào tệp.

## Nối output

Ví dụ đổi các ký tự l thành e

    cat <<'EOF' |  sed 's/l/e/g'
    Hello
    World
    EOF

Output

    Heeeo
    Wored

Ghi output vào file
 
    cat <<'EOF' |  sed 's/l/e/g' > file.txt
    Hello
    World
    EOF

## Sử dụng kết hợp SSH

    ssh -T root@172.16.70.222 << EOF
    echo "The current local working directory is: $PWD"
    echo "The current remote working directory is: \$PWD"
    EOF

Output

    The current local working directory is: /root
    The current remote working directory is: /root

Có thể sử dụng SSH key-based authentication để bỏ qua bước nhập mật khẩu.

## Tham khảo

https://www.howtogeek.com/719058/how-to-use-here-documents-in-bash-on-linux/


https://linuxize.com/post/bash-heredoc/