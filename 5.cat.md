# Chapter 5: Sử dụng lệnh `cat`

| Tùy chọn | Mô tả  |
|-----|:-----|
| -n  |  In các số dòng    |
| -v   | Hiển thị các ký tự không in bằng ký hiệu ^ và M- ngoại trừ LFD và TAB    |
| -T  |  Hiển thị các ký tự TAB là `^|`    |
| -E  |  Hiển thị các ký tự linefeed là `$`    |
| -e  |  Tương tự với `-vE`    |
| -b  |  Đánh số dòng đầu ra không có gì, ghi đè `-n`    |
| -A  |  Tương tự với `-vET`   |
| -s  |  ngăn chặn các dòng đầu ra trống lặp lại    |

## 5.1. Nối các tệp

Đây chính là mục đích chính của lệnh `cat`

    [root@localhost dungdb]# cat file1
    1
    [root@localhost dungdb]# cat file2
    2
    [root@localhost dungdb]# cat file3
    3
    [root@localhost dungdb]# cat file1 file2 file3 > file123
    [root@localhost dungdb]# cat file123
    1
    2
    3
    [root@localhost dungdb]#

cat cũng có thể được sử dụng tương tự để nối các tệp như một phần của 1 pipeline

    [root@localhost dungdb]# cat file1 file2 file3 | grep 1
    1
    [root@localhost dungdb]#

## 5.2. In nội dung tệp

    [root@localhost ~]# cat text.txt
    dung
    hanoi
    2021
    09

Nên dùng lệnh `less` hoặc `more` để tương tác với file. Lệnh `less` mạnh hơn `more` và nên dùng hơn.

Để lấy nội dung file làm input cho một lệnh thì dùng

    tr A-Z a-z <text.txt

Tương đương với `cat file.txt | tr A-Z a-z`

Hiển thị ngược

    [root@localhost ~]# tac text.txt
    09
    2021
    hanoi
    dung

Hiển thị có số dòng, thêm option `-n`

    [root@localhost ~]# cat -n text.txt
        1  dung
        2  hanoi
        3  2021
        4  09
## 5.3. Viết vào 1 file

    [root@localhost ~]# cat > file
    dung
    [root@localhost ~]# cat file
    dung
    [root@localhost ~]# cat >> file
    hanoi
    [root@localhost ~]# cat file
    dung
    hanoi
    [root@localhost ~]#

Dùng `Ctrl + D` để kết thúc nhập

`>` sẽ xóa hết nội dung trong file và nhập vào nội dung mới.
`>>` sẽ nối tiếp nội dung đang nhập vào nội dung đã có trong file

## 5.4. Hiển thị các ký tự không thể in ra được

Dùng `cat -vET` hoặc `cat -A`

    [root@localhost ~]# echo '” `' | cat -A
    M-bM-^@M-^] `$
    [root@localhost ~]# echo '” ' | cat -vET
    M-bM-^@M-^] $
    [root@localhost ~]#

## 5.5. Đọc từ input tiêu chuẩn

    [root@localhost ~]# printf "dong dau tien\ndong thu hai\n" | cat -n
        1  dong dau tien
        2  dong thu hai
    [root@localhost ~]#

Dấu `|` dùng để thực hiện lệnh `printf` rồi mới thực hiện lệnh `cat`

## 5.6. Hiển thị dòng với output

Sử dụng option `--number` hoặc `-n` để in số dòng trước mỗi dòng.

Sở dụng cờ `-b` in số dòng bỏ qua các dòng không có dữ liệu

    [root@localhost ~]# cat --number text.txt
        1  dung
        2
        3  hanoi
        4
        5  2021
        6  09
    [root@localhost ~]# cat -b text.txt
        1  dung

        2  hanoi

        3  2021
        4  09
    [root@localhost ~]#

## 5.7. Nối các tệp zip

Các file được nén bởi `gzip` có thể được nối trực tiếp thành các tệp gzip lớn hơn.

    cat file1.gz file2.gz file3.gz > combined.gz

Đây là một thuộc tính của gzip kém hiệu quả hơn việc nối các tệp đầu vào và giải nén kết quả:

    cat file1 file2 file3 | gzip > combined.gz

Ví dụ:

    [root@localhost opt]# echo 'Hello world!' > hello.txt
    [root@localhost opt]# echo 'Howdy world!' > howdy.txt
    [root@localhost opt]# gzip hello.txt
    [root@localhost opt]# gzip howdy.txt
    [root@localhost opt]# cat hello.txt.gz howdy.txt.gz > greetings.txt.gz
    [root@localhost opt]# gunzip greetings.txt.gz
    [root@localhost opt]# cat greetings.txt
    Hello world!
    Howdy world!
    [root@localhost opt]#

2 câu lệnh đầu tiên thực hiện tạo 2 file mới. Câu lệnh thứ 3 và 4 thực hiện nén 2 file. câu lệnh thứ 5 thực hiện nén vào file chung. Câu lệnh thứ 6 thực hiện giải nén. Dòng cuối xem kết quả. Ở đây không phải là 2 file gzip là là kết quả đầu tiên của 2 file txt gộp lại.

Lưu ý rằng greetings.txt.gz là một tệp duy nhất và được giải nén dưới dạng tệp greeting.txt duy nhất.

Ngược lại, `tar -czf hello.txt howdy.txt> welcome.tar.gz`, giữ các tệp riêng biệt bên trong tarball.

