# Chapter 21: Quoting (Trích dẫn)

## 21.1: Dấu ngoặc kép để thay thế biến và lệnh

    calculation='2 * 3'

    echo "$calculation" # In ra 2 * 3
    echo $calculation # In ra 2, danh sách file ở thư mục hiện tại, và 3
    echo "$(($calculation))" # In ra 6

Bên ngoài dấu ngoặc kép, $var nhận giá trị của var, chia nó thành các phần được phân cách bằng khoảng trắng và diễn giải mỗi phần dưới dạng một glob (wildcard) pattern. Trừ khi bạn muốn hành vi này, hãy luôn đặt $var bên trong dấu ngoặc kép: "$var".

Điều tương tự cũng áp dụng cho các thay thế lệnh: "$(mycommand)" là kết quả đầu ra của mycommand, $(mycommand) là kết quả của phép chia + glob trên đầu ra

    echo "$var" # good
    echo "$(mycommand)" # good
    another=$var # also works, assignment is implicitly double-quoted
    make -D THING=$var # BAD! This is not a bash assignment.
    make -D THING="$var" # good
    make -D "THING=$var" # also good

## 21.2: Sự khác biệt giữa trích dẫn ngoặc đơn và ngoặc kép

| Ngoặc kép | Ngoặc đơn  |
|-----|:-----:|
| Cho phép mở rộng biến   | Ngăn mở rộng biến    |
| Cho phép mở rộng lịch sử nếu được bật   | Ngăn mở rộng lịch sử    |
| Cho phép thay thế lệnh   | Ngăn thay thế lệnh    |
| * và @ có thể có nghĩa đặc biệt   | * và @ luôn luôn mang nghĩa đen    |
| Có thể chứa cả ngoặc đơn hoặc ngoặc kép   | Ngoặc đơn không được phép đặc bên trong ngoặc đơn    |
| `$`, `'`,`"`, `\` có thể được thoát bằng `\` để ngăn ý nghĩa đặc biệt của chúng   | `$`, `'`,`"`, `\` chỉ có nghĩa đen     |

Thuộc tính chung cho cả hai:
- Ngăn chặn globbing
- Ngăn tách từ

    [root@localhost ~]# echo "!cat"
    echo "cat file"
    cat file
    [root@localhost ~]# echo '!cat'
    !cat
    [root@localhost ~]# echo "\"'\""
    "'"

    [root@localhost ~]# a='var'
    [root@localhost ~]# echo '$a'
    $a
    [root@localhost ~]# echo "$a"
    var
    [root@localhost ~]#

## 21.3. Dòng mới và kỹ tự điều khiển

Một dòng mới có thể được bao gồm trong một chuỗi được trích dẫn đơn hoặc chuỗi được trích dẫn kép. Lưu ý rằng dấu gạch chéo ngược-dòng mới không dẫn đến dòng mới, dấu ngắt dòng bị bỏ qua.

    newline1='
    '
    newline2="
    "
    newline3=$'\n'
    empty=\
    echo "Line${newline1}break"
    echo "Line${newline2}break"
    echo "Line${newline3}break"
    echo "No line break${empty} here"

Bên trong các chuỗi ký tự đô la, dấu gạch chéo ngược-ký tự hoặc dấu gạch chéo ngược-bát phân có thể được sử dụng để chèn các ký tự điều khiển, giống như trong nhiều ngôn ngữ lập trình khác.

    [root@localhost ~]# echo $'Tab: [\t]'
    Tab: [  ]
    [root@localhost ~]# echo $'Tab again: [\009]'
    Tab again: [
    [root@localhost ~]# echo $'Form feed: [\f]'
    Form feed: [
    ]
    [root@localhost ~]# echo $'Line\nbreak'
    Line
    break
    [root@localhost ~]#
